<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-database_documentation" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">ThriftFinder Firestore Database Documentation | Muscle Mommies Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://tino-ryan.github.io/Muscle-mommies/database_documentation"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="ThriftFinder Firestore Database Documentation | Muscle Mommies Docs"><meta data-rh="true" name="description" content="Overview"><meta data-rh="true" property="og:description" content="Overview"><link data-rh="true" rel="icon" href="/Muscle-mommies/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://tino-ryan.github.io/Muscle-mommies/database_documentation"><link data-rh="true" rel="alternate" href="https://tino-ryan.github.io/Muscle-mommies/database_documentation" hreflang="en"><link data-rh="true" rel="alternate" href="https://tino-ryan.github.io/Muscle-mommies/database_documentation" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"ThriftFinder Firestore Database Documentation","item":"https://tino-ryan.github.io/Muscle-mommies/database_documentation"}]}</script><link rel="alternate" type="application/rss+xml" href="/Muscle-mommies/blog/rss.xml" title="Muscle Mommies Docs RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Muscle-mommies/blog/atom.xml" title="Muscle Mommies Docs Atom Feed"><link rel="stylesheet" href="/Muscle-mommies/assets/css/styles.4769c4bb.css">
<script src="/Muscle-mommies/assets/js/runtime~main.089d0bd9.js" defer="defer"></script>
<script src="/Muscle-mommies/assets/js/main.dd00a2b4.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/Muscle-mommies/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/Muscle-mommies/"><div class="navbar__logo"><img src="/Muscle-mommies/img/logo.svg" alt="Muscle Mommies Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/Muscle-mommies/img/logo.svg" alt="Muscle Mommies Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Muscle Mommies</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/Muscle-mommies/intro">Docs</a><a class="navbar__item navbar__link" href="/Muscle-mommies/blog">Blog</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/tino-ryan/Muscle-mommies" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Muscle-mommies/intro">Project: Muscle Mommies</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Muscle-mommies/tech-stack">Tech Stack</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Muscle-mommies/Version-control">Version Control</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Muscle-mommies/git-methodology">Git Methodology</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Muscle-mommies/Dev-guide">Muscle-Mommies Development Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Muscle-mommies/Structure">structure and progress</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Muscle-mommies/initial-design">Initial Design</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Muscle-mommies/development-plan">Development Plan</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Muscle-mommies/project-management">Project Management Methodology &amp; Setup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Muscle-mommies/third-party-code">third-party-code</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Muscle-mommies/api_documentation">ThriftFinder External API Documentation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/Muscle-mommies/database_documentation">ThriftFinder Firestore Database Documentation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Muscle-mommies/user-feedback">User Feedback &amp; Methodology</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Muscle-mommies/Bug-tracker">Sprint 2 Bug Tracking</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Muscle-mommies/TestingDocumentation">Testing Documentation</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/Muscle-mommies/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">ThriftFinder Firestore Database Documentation</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>ThriftFinder Firestore Database Documentation</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview">​</a></h2>
<p>ThriftFinder uses <strong>Firebase Firestore</strong> as its database to manage thrift store data, user interactions, and photo journal entries. The database supports the ThriftFinder app&#x27;s core functionality (e.g., store management, item listings, reservations, and messaging) and the external API for integration with the Campus Quest project. This documentation describes the Firestore collections, their structure, purpose, and how they enable the application&#x27;s features and external API endpoints.</p>
<p>The database is designed to:</p>
<ul>
<li>Store thrift store profiles and their inventory for display in ThriftFinder and as quest locations or advertisements in Campus Quest.</li>
<li>Manage user interactions like reservations and messaging.</li>
<li>Support photo uploads for user photo journals via the external API, stored in a separate <code>externalImages</code> collection to avoid interference with ThriftFinder’s internal logic.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="database-setup">Database Setup<a href="#database-setup" class="hash-link" aria-label="Direct link to Database Setup" title="Direct link to Database Setup">​</a></h2>
<ul>
<li><strong>Database</strong>: Google Firebase Firestore (NoSQL, document-based).</li>
<li><strong>Collections</strong>: The database consists of seven main collections: <code>users</code>, <code>stores</code>, <code>items</code>, <code>itemImages</code>, <code>Reservations</code>, <code>chats</code>, <code>messages</code>, and an additional <code>externalImages</code> collection for the external API.</li>
<li><strong>Environment</strong>: Configured via Firebase Admin SDK in the backend (<code>config/firebase.js</code>), with credentials stored in environment variables (<code>FIREBASE_*</code> in <code>.env</code>).</li>
<li><strong>Access</strong>: The backend (<code>index.js</code>, <code>storeController.js</code>, etc.) uses the Firebase Admin SDK for full read/write access. The external API (<code>/external/*</code>) provides read-only access to <code>stores</code> and read/write access to <code>externalImages</code> with API key authentication.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="collections">Collections<a href="#collections" class="hash-link" aria-label="Direct link to Collections" title="Direct link to Collections">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-users">1. <code>users</code><a href="#1-users" class="hash-link" aria-label="Direct link to 1-users" title="Direct link to 1-users">​</a></h3>
<p>Stores user profile information, including their role (customer or store owner).</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="structure">Structure<a href="#structure" class="hash-link" aria-label="Direct link to Structure" title="Direct link to Structure">​</a></h4>
<ul>
<li><strong>Document ID</strong>: Firebase UID (e.g., <code>dTGCpDOOteSXAq02NirTMZ2EOQk2</code>)</li>
<li><strong>Fields</strong>:<!-- -->
<ul>
<li><code>createdAt</code>: Timestamp of user creation (Firestore Timestamp, e.g., 18 August 2025 at 21:29:35 UTC+2)</li>
<li><code>email</code>: User’s email address (string, e.g., <code>boss@man.com</code>)</li>
<li><code>name</code>: User’s display name (string, e.g., <code>boss</code>)</li>
<li><code>role</code>: User role (string, enum: <code>customer</code> or <code>storeOwner</code>)</li>
</ul>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="purpose">Purpose<a href="#purpose" class="hash-link" aria-label="Direct link to Purpose" title="Direct link to Purpose">​</a></h4>
<ul>
<li>Tracks user accounts and their roles to differentiate between customers and store owners.</li>
<li>Used by <code>authController.js</code> for signup and role retrieval (<code>/api/auth/getRole</code>).</li>
<li>Links users to stores (via <code>ownerId</code> in <code>stores</code>) and reservations/messages (via <code>userId</code>, <code>senderId</code>, etc.).</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example">Example<a href="#example" class="hash-link" aria-label="Direct link to Example" title="Direct link to Example">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;createdAt&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;_seconds&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1724099375</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;_nanoseconds&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;email&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;boss@man.com&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;boss&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;role&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;storeOwner&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-stores">2. <code>stores</code><a href="#2-stores" class="hash-link" aria-label="Direct link to 2-stores" title="Direct link to 2-stores">​</a></h3>
<p>Stores thrift shop profiles, used for both ThriftFinder’s storefronts and Campus Quest’s quest locations/advertisements.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="structure-1">Structure<a href="#structure-1" class="hash-link" aria-label="Direct link to Structure" title="Direct link to Structure">​</a></h4>
<ul>
<li><strong>Document ID</strong>: Auto-generated Firestore ID or UUID (e.g., <code>c2e14220-5ebc-4211-9995-b056ad6e852f</code>)</li>
<li><strong>Fields</strong>:<!-- -->
<ul>
<li><code>address</code>: Physical address (string, e.g., <code>Wits Sports West Campus, Braamfontein, ...</code>)</li>
<li><code>createdAt</code>: Creation timestamp (Firestore Timestamp, e.g., 28 August 2025 at 21:37:24 UTC+2)</li>
<li><code>description</code>: Store description (string, e.g., <code>typical braam thrift shop</code>)</li>
<li><code>location</code>: Geolocation (map, <code>{ lat: number, lng: number }</code>, e.g., <code>{ &quot;lat&quot;: -26.1869103, &quot;lng&quot;: 28.0299083 }</code>)</li>
<li><code>ownerId</code>: Firebase UID of the store owner (string, e.g., <code>dTGCpDOOteSXAq02NirTMZ2EOQk2</code>)</li>
<li><code>profileImageURL</code>: Cloudinary URL for store’s profile image (string, e.g., <code>https://res.cloudinary.com/...</code>)</li>
<li><code>storeId</code>: UUID for the store (string, matches document ID)</li>
<li><code>storeName</code>: Store name (string, e.g., <code>Skull Dugree</code>)</li>
<li><code>updatedAt</code>: Last update timestamp (Firestore Timestamp, e.g., 1 September 2025 at 23:40:36 UTC+2)</li>
</ul>
</li>
<li><strong>Subcollection</strong>: <code>contactInfos</code>
<ul>
<li><strong>Document ID</strong>: UUID (e.g., <code>4ac6605e-e6e7-476a-9f46-e10d08d3072a</code>)</li>
<li><strong>Fields</strong>:<!-- -->
<ul>
<li><code>id</code>: UUID (string, matches document ID)</li>
<li><code>type</code>: Contact type (string, e.g., <code>phone</code>, <code>email</code>, <code>instagram</code>)</li>
<li><code>value</code>: Contact value (string, e.g., <code>0667778888</code>)</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="purpose-1">Purpose<a href="#purpose-1" class="hash-link" aria-label="Direct link to Purpose" title="Direct link to Purpose">​</a></h4>
<ul>
<li>Stores thrift shop metadata for display in ThriftFinder’s storefronts and Campus Quest’s quest locations/advertisements (<code>GET /external/stores</code>).</li>
<li>Links to <code>items</code>, <code>Reservations</code>, <code>chats</code>, and <code>messages</code> via <code>storeId</code>.</li>
<li>Subcollection <code>contactInfos</code> stores additional contact details (e.g., phone, social media).</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-1">Example<a href="#example-1" class="hash-link" aria-label="Direct link to Example" title="Direct link to Example">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;address&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Wits Sports West Campus, Braamfontein, Johannesburg Ward 60, ...&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;createdAt&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;_seconds&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1724879844</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;_nanoseconds&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;description&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;typical braam thrift shop&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;location&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;lat&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">-26.1869103</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;lng&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">28.0299083</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;ownerId&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;dTGCpDOOteSXAq02NirTMZ2EOQk2&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;profileImageURL&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;https://res.cloudinary.com/dfkg0topw/image/upload/v1756409843/muscle-mommies/owo3oralfcyucwkdupot.png&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;storeId&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;c2e14220-5ebc-4211-9995-b056ad6e852f&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;storeName&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Skull Dugree&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;updatedAt&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;_seconds&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1725229236</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;_nanoseconds&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-items">3. <code>items</code><a href="#3-items" class="hash-link" aria-label="Direct link to 3-items" title="Direct link to 3-items">​</a></h3>
<p>Stores thrift item listings for sale in stores.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="structure-2">Structure<a href="#structure-2" class="hash-link" aria-label="Direct link to Structure" title="Direct link to Structure">​</a></h4>
<ul>
<li><strong>Document ID</strong>: UUID (e.g., <code>1f8a7251-342c-409f-aaa2-54c6e5af3ab0</code>)</li>
<li><strong>Fields</strong>:<!-- -->
<ul>
<li><code>category</code>: Item category (string, e.g., <code>footwear</code>)</li>
<li><code>createdAt</code>: Creation timestamp (Firestore Timestamp, e.g., 28 August 2025 at 11:29:10 UTC+2)</li>
<li><code>department</code>: Department (string, e.g., <code>men&#x27;s</code>, <code>women&#x27;s</code>)</li>
<li><code>description</code>: Item description (string, e.g., <code>cool pair of adidas</code>)</li>
<li><code>images</code>: Array of image metadata (array of maps, <code>{ imageId: string, imageURL: string, isPrimary: boolean }</code>)</li>
<li><code>itemId</code>: UUID (string, matches document ID)</li>
<li><code>name</code>: Item name (string, e.g., <code>shoes</code>)</li>
<li><code>price</code>: Item price (number, e.g., 300)</li>
<li><code>quantity</code>: Available quantity (number, e.g., 2)</li>
<li><code>size</code>: Item size (string, e.g., <code>7</code>)</li>
<li><code>status</code>: Item status (string, enum: <code>Available</code>, <code>Reserved</code>, <code>Out of Stock</code>, e.g., <code>Reserved</code>)</li>
<li><code>storeId</code>: Reference to store (string, e.g., <code>c2e14220-5ebc-4211-9995-b056ad6e852f</code>)</li>
<li><code>style</code>: Item style (string, e.g., <code>streetwear</code>)</li>
<li><code>updatedAt</code>: Last update timestamp (Firestore Timestamp, e.g., 2 September 2025 at 00:02:59 UTC+2)</li>
</ul>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="purpose-2">Purpose<a href="#purpose-2" class="hash-link" aria-label="Direct link to Purpose" title="Direct link to Purpose">​</a></h4>
<ul>
<li>Stores item listings for ThriftFinder’s inventory management and shopping features.</li>
<li>Links to <code>Reservations</code>, <code>chats</code>, and <code>messages</code> via <code>itemId</code>.</li>
<li>Used by <code>itemController.js</code> for CRUD operations (<code>/api/items</code>, <code>/api/stores/:storeId/items</code>, etc.).</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-2">Example<a href="#example-2" class="hash-link" aria-label="Direct link to Example" title="Direct link to Example">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;category&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;footwear&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;createdAt&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;_seconds&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1724839750</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;_nanoseconds&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;department&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;men&#x27;s&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;description&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;cool pair of adidas&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;images&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;imageId&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;8a62996e-86c0-4615-9b08-2220f532ebd1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;imageURL&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;https://res.cloudinary.com/dfkg0topw/image/upload/v1756419335/muscle-mommies/i4qzrhv1trdvzb8ehe0c.jpg&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;isPrimary&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;imageId&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2ce94624-cd8b-493a-894d-910597abe2ca&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;imageURL&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;https://res.cloudinary.com/dfkg0topw/image/upload/v1756668350/muscle-mommies/lamdqkswsz70xecaauji.webp&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;isPrimary&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;itemId&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1f8a7251-342c-409f-aaa2-54c6e5af3ab0&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;shoes&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;price&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">300</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;quantity&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;size&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;7&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;status&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Reserved&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;storeId&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;c2e14220-5ebc-4211-9995-b056ad6e852f&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;style&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;streetwear&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;updatedAt&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;_seconds&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1725232979</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;_nanoseconds&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-itemimages">4. <code>itemImages</code><a href="#4-itemimages" class="hash-link" aria-label="Direct link to 4-itemimages" title="Direct link to 4-itemimages">​</a></h3>
<p>Stores metadata for images associated with items, uploaded to Cloudinary.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="structure-3">Structure<a href="#structure-3" class="hash-link" aria-label="Direct link to Structure" title="Direct link to Structure">​</a></h4>
<ul>
<li><strong>Document ID</strong>: UUID (e.g., <code>121d5f7d-818b-4831-9e6f-11ae3c68b7e7</code>)</li>
<li><strong>Fields</strong>:<!-- -->
<ul>
<li><code>imageId</code>: UUID (string, matches document ID)</li>
<li><code>imageURL</code>: Cloudinary URL (string, e.g., <code>https://res.cloudinary.com/...</code>)</li>
<li><code>isPrimary</code>: Whether the image is primary (boolean, e.g., <code>false</code>)</li>
<li><code>itemId</code>: Reference to item (string, e.g., <code>58509fa7-5125-412e-b6eb-648fd822cb16</code>)</li>
</ul>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="purpose-3">Purpose<a href="#purpose-3" class="hash-link" aria-label="Direct link to Purpose" title="Direct link to Purpose">​</a></h4>
<ul>
<li>Stores image metadata for item listings, linked to <code>items</code> via <code>itemId</code>.</li>
<li>Populated by <code>storeController.js</code> during item creation/update (<code>/api/stores/items</code>, <code>/api/stores/items/:itemId</code>).</li>
<li>Separate from <code>externalImages</code> to isolate ThriftFinder’s internal images from Campus Quest’s photo journal uploads.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-3">Example<a href="#example-3" class="hash-link" aria-label="Direct link to Example" title="Direct link to Example">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;imageId&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;121d5f7d-818b-4831-9e6f-11ae3c68b7e7&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;imageURL&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;https://res.cloudinary.com/dfkg0topw/image/upload/v1756419431/muscle-mommies/aw7zglpyl8nx1pnvjist.jpg&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;isPrimary&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;itemId&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;58509fa7-5125-412e-b6eb-648fd822cb16&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="5-reservations">5. <code>Reservations</code><a href="#5-reservations" class="hash-link" aria-label="Direct link to 5-reservations" title="Direct link to 5-reservations">​</a></h3>
<p>Tracks item reservations made by customers.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="structure-4">Structure<a href="#structure-4" class="hash-link" aria-label="Direct link to Structure" title="Direct link to Structure">​</a></h4>
<ul>
<li><strong>Document ID</strong>: UUID (e.g., <code>3cf472eb-f579-4561-8bba-d0b3e3fe9196</code>)</li>
<li><strong>Fields</strong>:<!-- -->
<ul>
<li><code>itemId</code>: Reference to item (string, e.g., <code>1f8a7251-342c-409f-aaa2-54c6e5af3ab0</code>)</li>
<li><code>reservationId</code>: UUID (string, matches document ID)</li>
<li><code>reservedAt</code>: Reservation timestamp (Firestore Timestamp, e.g., 1 September 2025 at 09:37:04 UTC+2)</li>
<li><code>status</code>: Reservation status (string, enum: <code>Pending</code>, <code>Confirmed</code>, <code>Cancelled</code>, <code>Completed</code>, e.g., <code>Pending</code>)</li>
<li><code>storeId</code>: Reference to store (string, e.g., <code>c2e14220-5ebc-4211-9995-b056ad6e852f</code>)</li>
<li><code>updatedAt</code>: Last update timestamp (Firestore Timestamp, e.g., 1 September 2025 at 23:39:58 UTC+2)</li>
<li><code>userId</code>: Firebase UID of the reserving user (string, e.g., <code>m4lMopagfkbd2RURe9JeralPK4R2</code>)</li>
</ul>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="purpose-4">Purpose<a href="#purpose-4" class="hash-link" aria-label="Direct link to Purpose" title="Direct link to Purpose">​</a></h4>
<ul>
<li>Manages item reservations for ThriftFinder’s order system (<code>/api/stores/reservations</code>, <code>/api/stores/reserve/:itemId</code>).</li>
<li>Links to <code>items</code> and <code>stores</code> via <code>itemId</code> and <code>storeId</code>.</li>
<li>Used by store owners to confirm/cancel reservations (<code>updateReservation</code> in <code>storeController.js</code>).</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-4">Example<a href="#example-4" class="hash-link" aria-label="Direct link to Example" title="Direct link to Example">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;itemId&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1f8a7251-342c-409f-aaa2-54c6e5af3ab0&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;reservationId&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;3cf472eb-f579-4561-8bba-d0b3e3fe9196&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;reservedAt&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;_seconds&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1725178624</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;_nanoseconds&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;status&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Pending&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;storeId&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;c2e14220-5ebc-4211-9995-b056ad6e852f&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;updatedAt&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;_seconds&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1725227998</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;_nanoseconds&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;userId&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;m4lMopagfkbd2RURe9JeralPK4R2&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="6-chats">6. <code>chats</code><a href="#6-chats" class="hash-link" aria-label="Direct link to 6-chats" title="Direct link to 6-chats">​</a></h3>
<p>Stores conversation metadata between users (e.g., customer and store owner).</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="structure-5">Structure<a href="#structure-5" class="hash-link" aria-label="Direct link to Structure" title="Direct link to Structure">​</a></h4>
<ul>
<li><strong>Document ID</strong>: Concatenated Firebase UIDs (e.g., <code>dTGCpDOOteSXAq02NirTMZ2EOQk2_m4lMopagfkbd2RURe9JeralPK4R2</code>)</li>
<li><strong>Fields</strong>:<!-- -->
<ul>
<li><code>chatId</code>: Concatenated UIDs (string, matches document ID)</li>
<li><code>itemId</code>: Reference to item (string, optional, e.g., <code>1f8a7251-342c-409f-aaa2-54c6e5af3ab0</code>)</li>
<li><code>lastMessage</code>: Most recent message text (string, e.g., <code>Condition is excellent.</code>)</li>
<li><code>lastTimestamp</code>: Timestamp of last message (Firestore Timestamp, e.g., 1 September 2025 at 15:25:56 UTC+2)</li>
<li><code>participants</code>: Array of Firebase UIDs (array of strings, e.g., <code>[&quot;dTGCpDOOteSXAq02NirTMZ2EOQk2&quot;, &quot;m4lMopagfkbd2RURe9JeralPK4R2&quot;]</code>)</li>
<li><code>storeId</code>: Reference to store (string, optional, e.g., <code>c2e14220-5ebc-4211-9995-b056ad6e852f</code>)</li>
</ul>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="purpose-5">Purpose<a href="#purpose-5" class="hash-link" aria-label="Direct link to Purpose" title="Direct link to Purpose">​</a></h4>
<ul>
<li>Tracks conversations for ThriftFinder’s in-app messaging (<code>/api/stores/chats</code>, <code>/api/stores/messages</code>).</li>
<li>Links to <code>messages</code>, <code>items</code>, and <code>stores</code> via <code>chatId</code>, <code>itemId</code>, and <code>storeId</code>.</li>
<li>Populated when users send messages or create chats (<code>sendMessage</code>, <code>createChat</code> in <code>storeController.js</code>).</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-5">Example<a href="#example-5" class="hash-link" aria-label="Direct link to Example" title="Direct link to Example">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;chatId&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;dTGCpDOOteSXAq02NirTMZ2EOQk2_m4lMopagfkbd2RURe9JeralPK4R2&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;itemId&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1f8a7251-342c-409f-aaa2-54c6e5af3ab0&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;lastMessage&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Condition is excellent.&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;lastTimestamp&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;_seconds&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1725199556</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;_nanoseconds&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;participants&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;dTGCpDOOteSXAq02NirTMZ2EOQk2&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;m4lMopagfkbd2RURe9JeralPK4R2&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;storeId&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;c2e14220-5ebc-4211-9995-b056ad6e852f&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="7-messages">7. <code>messages</code><a href="#7-messages" class="hash-link" aria-label="Direct link to 7-messages" title="Direct link to 7-messages">​</a></h3>
<p>Stores individual messages within conversations.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="structure-6">Structure<a href="#structure-6" class="hash-link" aria-label="Direct link to Structure" title="Direct link to Structure">​</a></h4>
<ul>
<li><strong>Document ID</strong>: Auto-generated Firestore ID (e.g., <code>92mnQMtLGwz1plHns8hK</code>)</li>
<li><strong>Fields</strong>:<!-- -->
<ul>
<li><code>chatId</code>: Reference to chat (string, e.g., <code>dTGCpDOOteSXAq02NirTMZ2EOQk2_m4lMopagfkbd2RURe9JeralPK4R2</code>)</li>
<li><code>itemId</code>: Reference to item (string, optional, e.g., <code>1f8a7251-342c-409f-aaa2-54c6e5af3ab0</code>)</li>
<li><code>message</code>: Message text (string, e.g., <code>Reservation request for shoes</code>)</li>
<li><code>read</code>: Whether the message was read (boolean, e.g., <code>true</code>)</li>
<li><code>receiverId</code>: Firebase UID of recipient (string, e.g., <code>dTGCpDOOteSXAq02NirTMZ2EOQk2</code>)</li>
<li><code>senderId</code>: Firebase UID of sender (string, e.g., <code>m4lMopagfkbd2RURe9JeralPK4R2</code>)</li>
<li><code>storeId</code>: Reference to store (string, optional, e.g., <code>c2e14220-5ebc-4211-9995-b056ad6e852f</code>)</li>
<li><code>timestamp</code>: Message timestamp (Firestore Timestamp, e.g., 1 September 2025 at 09:37:04 UTC+2)</li>
</ul>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="purpose-6">Purpose<a href="#purpose-6" class="hash-link" aria-label="Direct link to Purpose" title="Direct link to Purpose">​</a></h4>
<ul>
<li>Stores message history for ThriftFinder’s chat feature (<code>/api/stores/chats/:chatId/messages</code>).</li>
<li>Links to <code>chats</code>, <code>items</code>, and <code>stores</code> via <code>chatId</code>, <code>itemId</code>, and <code>storeId</code>.</li>
<li>Supports read receipts (<code>markAsRead</code> in <code>storeController.js</code>).</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-6">Example<a href="#example-6" class="hash-link" aria-label="Direct link to Example" title="Direct link to Example">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;chatId&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;dTGCpDOOteSXAq02NirTMZ2EOQk2_m4lMopagfkbd2RURe9JeralPK4R2&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;itemId&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1f8a7251-342c-409f-aaa2-54c6e5af3ab0&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;message&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Reservation request for shoes&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;read&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;receiverId&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;dTGCpDOOteSXAq02NirTMZ2EOQk2&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;senderId&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;m4lMopagfkbd2RURe9JeralPK4R2&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;storeId&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;c2e14220-5ebc-4211-9995-b056ad6e852f&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;timestamp&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;_seconds&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1725178624</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;_nanoseconds&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="8-externalimages">8. <code>externalImages</code><a href="#8-externalimages" class="hash-link" aria-label="Direct link to 8-externalimages" title="Direct link to 8-externalimages">​</a></h3>
<p>Stores metadata for photos uploaded via the external API (<code>POST /external/upload</code>) for Campus Quest’s photo journal feature.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="structure-7">Structure<a href="#structure-7" class="hash-link" aria-label="Direct link to Structure" title="Direct link to Structure">​</a></h4>
<ul>
<li><strong>Document ID</strong>: Cloudinary public ID (e.g., <code>muscle-mommies/external/abc123</code>)</li>
<li><strong>Fields</strong>:<!-- -->
<ul>
<li><code>imageId</code>: Cloudinary public ID (string, matches document ID)</li>
<li><code>imageURL</code>: Cloudinary URL (string, e.g., <code>https://res.cloudinary.com/...</code>)</li>
<li><code>createdAt</code>: Upload timestamp (Firestore Timestamp, e.g., 1 September 2025 at 09:00:00 UTC+2)</li>
</ul>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="purpose-7">Purpose<a href="#purpose-7" class="hash-link" aria-label="Direct link to Purpose" title="Direct link to Purpose">​</a></h4>
<ul>
<li>Stores metadata for photos uploaded by Campus Quest users, separate from <code>itemImages</code> to avoid interference with ThriftFinder’s internal logic.</li>
<li>Populated by <code>externalController.js</code> (<code>uploadPhoto</code>) and retrieved via <code>GET /external/photos</code>.</li>
<li>Supports Campus Quest’s photo journal feature, allowing users to upload quest-related images (e.g., thrift finds).</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-7">Example<a href="#example-7" class="hash-link" aria-label="Direct link to Example" title="Direct link to Example">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;imageId&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;muscle-mommies/external/abc123&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;imageURL&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;https://res.cloudinary.com/dfkg0topw/image/upload/v1756419431/muscle-mommies/external/abc123.jpg&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;createdAt&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;_seconds&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1725177600</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;_nanoseconds&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="why-this-setup">Why This Setup?<a href="#why-this-setup" class="hash-link" aria-label="Direct link to Why This Setup?" title="Direct link to Why This Setup?">​</a></h2>
<ul>
<li><strong>Firestore Choice</strong>: Firestore’s NoSQL structure supports flexible schemas, real-time updates, and scalability, ideal for ThriftFinder’s dynamic data (stores, items, chats) and Campus Quest’s integration needs.</li>
<li><strong>Separation of Concerns</strong>:<!-- -->
<ul>
<li><code>users</code>, <code>stores</code>, <code>items</code>, <code>itemImages</code>, <code>Reservations</code>, <code>chats</code>, and <code>messages</code> support ThriftFinder’s core functionality (storefronts, inventory, messaging, reservations).</li>
<li><code>externalImages</code> isolates Campus Quest’s photo journal uploads to prevent conflicts with ThriftFinder’s <code>itemImages</code>.</li>
</ul>
</li>
<li><strong>Relationships</strong>:<!-- -->
<ul>
<li><code>storeId</code> links <code>stores</code> to <code>items</code>, <code>Reservations</code>, <code>chats</code>, and <code>messages</code>.</li>
<li><code>itemId</code> links <code>items</code> to <code>itemImages</code>, <code>Reservations</code>, <code>chats</code>, and <code>messages</code>.</li>
<li><code>userId</code> and <code>ownerId</code> link users to reservations and stores.</li>
<li><code>chatId</code> links <code>chats</code> to <code>messages</code>.</li>
</ul>
</li>
<li><strong>External API Support</strong>:<!-- -->
<ul>
<li><code>stores</code> is exposed via <code>GET /external/stores</code> (public) for Campus Quest to use as quest locations or ads.</li>
<li><code>externalImages</code> supports <code>POST /external/upload</code> and <code>GET /external/photos</code> (API key secured) for photo journal management.</li>
</ul>
</li>
<li><strong>Scalability</strong>: Firestore’s automatic scaling handles growing data. The <code>externalImages</code> collection uses Cloudinary public IDs as document IDs to avoid collisions and simplify lookups.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-it-works">How It Works<a href="#how-it-works" class="hash-link" aria-label="Direct link to How It Works" title="Direct link to How It Works">​</a></h2>
<ol>
<li>
<p><strong>ThriftFinder App</strong>:</p>
<ul>
<li>Users sign up (<code>authController.js</code>) and are stored in <code>users</code>.</li>
<li>Store owners create/update stores (<code>createOrUpdateStore</code>), populating <code>stores</code> and <code>contactInfos</code>.</li>
<li>Items are added/updated (<code>createItem</code>, <code>updateItem</code>), stored in <code>items</code> with images in <code>itemImages</code>.</li>
<li>Customers reserve items (<code>customerReserve</code>), creating entries in <code>Reservations</code> and triggering messages in <code>chats</code> and <code>messages</code>.</li>
<li>Messages are sent (<code>sendMessage</code>) and tracked (<code>markAsRead</code>) in <code>chats</code> and <code>messages</code>.</li>
</ul>
</li>
<li>
<p><strong>External API for Campus Quest</strong>:</p>
<ul>
<li><code>GET /external/stores</code>: Retrieves all <code>stores</code> documents, used for quest locations or advertisements. No authentication needed to maximize exposure.</li>
<li><code>POST /external/upload</code>: Uploads photos to Cloudinary (in <code>muscle-mommies/external</code> folder) and stores metadata in <code>externalImages</code>. Requires API key for security.</li>
<li><code>GET /external/photos</code>: Retrieves all <code>externalImages</code> documents for photo journal display. Requires API key.</li>
</ul>
</li>
<li>
<p><strong>Data Flow</strong>:</p>
<ul>
<li><strong>Store Creation</strong>: <code>stores</code> → <code>contactInfos</code> (optional).</li>
<li><strong>Item Listing</strong>: <code>items</code> → <code>itemImages</code> (via Cloudinary uploads).</li>
<li><strong>Reservation</strong>: <code>items</code> (update <code>status</code>) → <code>Reservations</code> → <code>chats</code>/<code>messages</code> (notification to store owner).</li>
<li><strong>Messaging</strong>: <code>chats</code> (conversation metadata) → <code>messages</code> (individual messages).</li>
<li><strong>Photo Journal</strong>: External client uploads photo → Cloudinary → <code>externalImages</code>.</li>
</ul>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="usage-notes">Usage Notes<a href="#usage-notes" class="hash-link" aria-label="Direct link to Usage Notes" title="Direct link to Usage Notes">​</a></h2>
<ul>
<li><strong>Access</strong>: The backend uses Firebase Admin SDK with full access. The external API restricts <code>externalImages</code> access to API key holders (<code>validateApiKey</code> in <code>externalController.js</code>).</li>
<li><strong>Security</strong>:<!-- -->
<ul>
<li>Firebase Security Rules should restrict read/write access to authenticated users for <code>users</code>, <code>stores</code>, <code>items</code>, etc., except for <code>stores</code> (public read for <code>/external/stores</code>).</li>
<li><code>externalImages</code> is write-protected by API key in the backend, but Firestore rules should further limit access.</li>
</ul>
</li>
<li><strong>Campus Quest Integration</strong>:<!-- -->
<ul>
<li>Use <code>stores</code> data for quest locations (e.g., map <code>location.lat</code>, <code>location.lng</code>).</li>
<li>Use <code>externalImages</code> for photo journals, storing/retrieving quest-related images.</li>
<li>Share the API key securely with the Campus Quest team for <code>/external/upload</code> and <code>/external/photos</code>.</li>
</ul>
</li>
<li><strong>Maintenance</strong>:<!-- -->
<ul>
<li>Monitor Firestore usage (reads/writes) to optimize costs.</li>
<li>Periodically clean up <code>externalImages</code> if unused photos accumulate (e.g., implement a TTL policy).</li>
<li>Ensure Cloudinary folder <code>muscle-mommies/external</code> is monitored for storage limits.</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="example-data-flow">Example Data Flow<a href="#example-data-flow" class="hash-link" aria-label="Direct link to Example Data Flow" title="Direct link to Example Data Flow">​</a></h2>
<ol>
<li><strong>Store Owner Adds Item</strong>:<!-- -->
<ul>
<li>Creates store in <code>stores</code> (<code>c2e14220-5ebc-4211-9995-b056ad6e852f</code>).</li>
<li>Adds item (<code>1f8a7251-342c-409f-aaa2-54c6e5af3ab0</code>) to <code>items</code> with images in <code>itemImages</code>.</li>
</ul>
</li>
<li><strong>Customer Reserves Item</strong>:<!-- -->
<ul>
<li>Triggers <code>customerReserve</code>, creating a <code>Reservations</code> entry (<code>3cf472eb-f579-4561-8bba-d0b3e3fe9196</code>).</li>
<li>Updates <code>items.status</code> to <code>Reserved</code>.</li>
<li>Creates a <code>chats</code> entry and sends a <code>messages</code> entry (<code>92mnQMtLGwz1plHns8hK</code>).</li>
</ul>
</li>
<li><strong>Campus Quest Uses API</strong>:<!-- -->
<ul>
<li>Calls <code>GET /external/stores</code> to get store data for quests.</li>
<li>Uploads a photo via <code>POST /external/upload</code>, storing metadata in <code>externalImages</code>.</li>
</ul>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="notes">Notes<a href="#notes" class="hash-link" aria-label="Direct link to Notes" title="Direct link to Notes">​</a></h2>
<ul>
<li><strong>Indexes</strong>: Ensure Firestore composite indexes are set for queries (e.g., <code>chats.participants</code>, <code>items.storeId</code>, <code>Reservations.userId</code>). Check the Firestore console for index errors.</li>
<li><strong>Backups</strong>: Use Firebase’s export feature to back up data regularly.</li>
<li><strong>Campus Quest Collaboration</strong>: Share this documentation and the API key with the Campus Quest team. Discuss additional needs (e.g., filtering stores by location or linking photos to quests).</li>
<li><strong>Future Improvements</strong>:<!-- -->
<ul>
<li>Add <code>externalImages</code> fields for linking to Campus Quest users/quests.</li>
<li>Implement Firestore TTL policies for old <code>externalImages</code> documents.</li>
<li>Add geospatial queries for <code>stores.location</code> to support proximity-based quests.</li>
</ul>
</li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/tino-ryan/Muscle-mommies/edit/gh-pages/docs/database_documentation.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/Muscle-mommies/api_documentation"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">ThriftFinder External API Documentation</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/Muscle-mommies/user-feedback"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">User Feedback &amp; Methodology</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#database-setup" class="table-of-contents__link toc-highlight">Database Setup</a></li><li><a href="#collections" class="table-of-contents__link toc-highlight">Collections</a><ul><li><a href="#1-users" class="table-of-contents__link toc-highlight">1. <code>users</code></a></li><li><a href="#2-stores" class="table-of-contents__link toc-highlight">2. <code>stores</code></a></li><li><a href="#3-items" class="table-of-contents__link toc-highlight">3. <code>items</code></a></li><li><a href="#4-itemimages" class="table-of-contents__link toc-highlight">4. <code>itemImages</code></a></li><li><a href="#5-reservations" class="table-of-contents__link toc-highlight">5. <code>Reservations</code></a></li><li><a href="#6-chats" class="table-of-contents__link toc-highlight">6. <code>chats</code></a></li><li><a href="#7-messages" class="table-of-contents__link toc-highlight">7. <code>messages</code></a></li><li><a href="#8-externalimages" class="table-of-contents__link toc-highlight">8. <code>externalImages</code></a></li></ul></li><li><a href="#why-this-setup" class="table-of-contents__link toc-highlight">Why This Setup?</a></li><li><a href="#how-it-works" class="table-of-contents__link toc-highlight">How It Works</a></li><li><a href="#usage-notes" class="table-of-contents__link toc-highlight">Usage Notes</a></li><li><a href="#example-data-flow" class="table-of-contents__link toc-highlight">Example Data Flow</a></li><li><a href="#notes" class="table-of-contents__link toc-highlight">Notes</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/Muscle-mommies/">Introduction</a></li><li class="footer__item"><a class="footer__link-item" href="/Muscle-mommies/tech-stack">Tech Stack</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/tino-ryan/Muscle-mommies" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Muscle Mommies.</div></div></div></footer></div>
</body>
</html>