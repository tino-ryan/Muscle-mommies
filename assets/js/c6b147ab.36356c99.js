"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[7233],{6638:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>t,contentTitle:()=>c,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"database_documentation","title":"Firestore Database Documentation","description":"Overview","source":"@site/docs/database_documentation.md","sourceDirName":".","slug":"/database_documentation","permalink":"/Muscle-mommies/database_documentation","draft":false,"unlisted":false,"editUrl":"https://github.com/tino-ryan/Muscle-mommies/edit/main/docs/docs/docs/database_documentation.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"ThriftFinder External API Documentation","permalink":"/Muscle-mommies/api_documentation"},"next":{"title":"User Feedback & Methodology","permalink":"/Muscle-mommies/user-feedback"}}');var r=n(4848),d=n(8453);const l={},c="Firestore Database Documentation",t={},o=[{value:"Overview",id:"overview",level:2},{value:"Diagram",id:"diagram",level:3},{value:"Why Firestore?",id:"why-firestore",level:3},{value:"Database Setup",id:"database-setup",level:3},{value:"Pros of Firestore Setup",id:"pros-of-firestore-setup",level:3},{value:"Cons of Firestore Setup",id:"cons-of-firestore-setup",level:3},{value:"Collections",id:"collections",level:2},{value:"1. <code>users</code>",id:"1-users",level:3},{value:"Schema",id:"schema",level:4},{value:"Purpose",id:"purpose",level:4},{value:"Example",id:"example",level:4},{value:"2. <code>stores</code>",id:"2-stores",level:3},{value:"Schema",id:"schema-1",level:4},{value:"Purpose",id:"purpose-1",level:4},{value:"Example",id:"example-1",level:4},{value:"3. <code>items</code>",id:"3-items",level:3},{value:"Schema",id:"schema-2",level:4},{value:"Purpose",id:"purpose-2",level:4},{value:"Example",id:"example-2",level:4},{value:"4. <code>itemImages</code>",id:"4-itemimages",level:3},{value:"Schema",id:"schema-3",level:4},{value:"Purpose",id:"purpose-3",level:4},{value:"Example",id:"example-3",level:4},{value:"5. <code>Reservations</code>",id:"5-reservations",level:3},{value:"Schema",id:"schema-4",level:4},{value:"Purpose",id:"purpose-4",level:4},{value:"Example",id:"example-4",level:4},{value:"6. <code>Reviews</code>",id:"6-reviews",level:3},{value:"Schema",id:"schema-5",level:4},{value:"Purpose",id:"purpose-5",level:4},{value:"Example",id:"example-5",level:4},{value:"7. <code>chats</code>",id:"7-chats",level:3},{value:"Schema",id:"schema-6",level:4},{value:"Purpose",id:"purpose-6",level:4},{value:"Example",id:"example-6",level:4},{value:"8. <code>messages</code>",id:"8-messages",level:3},{value:"Schema",id:"schema-7",level:4},{value:"Purpose",id:"purpose-7",level:4},{value:"Example",id:"example-7",level:4},{value:"9. <code>outfits</code>",id:"9-outfits",level:3},{value:"Schema",id:"schema-8",level:4},{value:"Purpose",id:"purpose-8",level:4},{value:"Example",id:"example-8",level:4},{value:"10. <code>externalImages</code>",id:"10-externalimages",level:3},{value:"Schema",id:"schema-9",level:4},{value:"Purpose",id:"purpose-9",level:4},{value:"Example",id:"example-9",level:4},{value:"Relationships",id:"relationships",level:2},{value:"Data Flow",id:"data-flow",level:2},{value:"ThriftFinder App",id:"thriftfinder-app",level:3},{value:"Campus Quest Integration",id:"campus-quest-integration",level:3},{value:"User Guide",id:"user-guide",level:2},{value:"For Developers",id:"for-developers",level:3},{value:"Setting Up Firestore",id:"setting-up-firestore",level:4},{value:"Querying Data",id:"querying-data",level:4},{value:"Maintaining the Database",id:"maintaining-the-database",level:4},{value:"For Campus Quest Team",id:"for-campus-quest-team",level:3},{value:"Notes",id:"notes",level:2}];function a(e){const s={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,d.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"firestore-database-documentation",children:"Firestore Database Documentation"})}),"\n",(0,r.jsx)(s.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsxs)(s.p,{children:["The ",(0,r.jsx)(s.strong,{children:"ThriftFinder"})," application leverages ",(0,r.jsx)(s.strong,{children:"Google Firebase Firestore"}),", a NoSQL, document-based database, to manage thrift store profiles, item listings, user interactions, and external API data for integration with the Campus Quest project. Firestore was chosen for its seamless integration with Firebase Authentication and Hosting, fast performance, clean and intuitive layout, and ability to meet all application requirements, as proven in our previous project. This documentation details the database structure, collection schemas, relationships, and usage guidelines for developers working with the ThriftFinder API and its external integrations."]}),"\n",(0,r.jsx)(s.h3,{id:"diagram",children:"Diagram"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-plain",children:"users\n  \u251c\u2500\u2500 Reservations (userId)\n  \u251c\u2500\u2500 stores (ownerId)\n  \u251c\u2500\u2500 messages (senderId, receiverId)\n  \u2514\u2500\u2500 outfits (userId)\n\nstores\n  \u251c\u2500\u2500 contactInfos (subcollection)\n  \u251c\u2500\u2500 items (storeId)\n  \u251c\u2500\u2500 Reservations (storeId)\n  \u251c\u2500\u2500 Reviews (storeId)\n  \u251c\u2500\u2500 chats (storeId)\n  \u2514\u2500\u2500 messages (storeId)\n\nitems\n  \u251c\u2500\u2500 itemImages (itemId)\n  \u251c\u2500\u2500 Reservations (itemId)\n  \u251c\u2500\u2500 Reviews (itemId)\n  \u251c\u2500\u2500 chats (itemId)\n  \u251c\u2500\u2500 messages (itemId)\n  \u2514\u2500\u2500 outfits (slots)\n\nchats\n  \u2514\u2500\u2500 messages (chatId)\n\nReservations\n  \u2514\u2500\u2500 Reviews (reservationId)\n\nexternalImages\n  (isolated, used by Campus Quest)\n"})}),"\n",(0,r.jsx)(s.h3,{id:"why-firestore",children:"Why Firestore?"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Seamless Integration"}),": Firestore integrates natively with Firebase Authentication (used for user management) and Firebase Hosting, simplifying setup and ensuring consistency across the stack. This was a key factor, as it worked well in our previous project."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Fast Performance"}),": Firestore\u2019s real-time updates and efficient querying support the dynamic needs of ThriftFinder (e.g., live item updates, messaging) and Campus Quest\u2019s external API."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Clean Layout"}),": The document-collection model provides a clear, hierarchical structure, making it easy to manage and query data for stores, items, and user interactions."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Scalability"}),": Firestore\u2019s automatic scaling handles growing data volumes without requiring manual infrastructure management."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Meets Requirements"}),": Firestore supports all ThriftFinder features (store management, item listings, reservations, chats, outfits) and Campus Quest\u2019s photo journal and store location needs, with no significant limitations encountered."]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"database-setup",children:"Database Setup"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Database"}),": Google Firebase Firestore (NoSQL, document-based)."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Environment"}),": Configured via Firebase Admin SDK in the backend (",(0,r.jsx)(s.code,{children:"/server/config/firebase.js"}),"), with credentials stored in environment variables (",(0,r.jsx)(s.code,{children:"FIREBASE_*"})," in ",(0,r.jsx)(s.code,{children:".env"}),")."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Access"}),":","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Backend: Full read/write access via Firebase Admin SDK in controllers (",(0,r.jsx)(s.code,{children:"itemController.js"}),", ",(0,r.jsx)(s.code,{children:"storeController.js"}),")."]}),"\n",(0,r.jsxs)(s.li,{children:["External API: Read-only access to ",(0,r.jsx)(s.code,{children:"stores"})," (",(0,r.jsx)(s.code,{children:"GET /external/stores"}),") and read/write access to ",(0,r.jsx)(s.code,{children:"externalImages"})," (",(0,r.jsx)(s.code,{children:"POST /external/upload"}),", ",(0,r.jsx)(s.code,{children:"GET /external/photos"}),") with API key authentication (",(0,r.jsx)(s.code,{children:"validateApiKey"})," in ",(0,r.jsx)(s.code,{children:"externalController.js"}),")."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Collections"}),": Nine main collections: ",(0,r.jsx)(s.code,{children:"users"}),", ",(0,r.jsx)(s.code,{children:"stores"}),", ",(0,r.jsx)(s.code,{children:"items"}),", ",(0,r.jsx)(s.code,{children:"itemImages"}),", ",(0,r.jsx)(s.code,{children:"Reservations"}),", ",(0,r.jsx)(s.code,{children:"Reviews"}),", ",(0,r.jsx)(s.code,{children:"chats"}),", ",(0,r.jsx)(s.code,{children:"messages"}),", ",(0,r.jsx)(s.code,{children:"outfits"}),", and ",(0,r.jsx)(s.code,{children:"externalImages"})," for Campus Quest\u2019s photo journal."]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"pros-of-firestore-setup",children:"Pros of Firestore Setup"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Ease of Setup"}),": Firestore\u2019s integration with Firebase Auth and Hosting streamlined development, especially given our team\u2019s prior experience with Firebase from the last project."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Real-Time Updates"}),": Supports live updates for chats (",(0,r.jsx)(s.code,{children:"messages"}),", ",(0,r.jsx)(s.code,{children:"chats"}),") and item status changes (",(0,r.jsx)(s.code,{children:"items"}),", ",(0,r.jsx)(s.code,{children:"Reservations"}),"), enhancing user experience."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Flexible Schema"}),": NoSQL structure allows dynamic fields (e.g., ",(0,r.jsx)(s.code,{children:"stores.hours"}),", ",(0,r.jsx)(s.code,{children:"items.images"}),") without rigid schema changes."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Scalability"}),": Automatically handles increased load as the platform grows, suitable for ThriftFinder\u2019s user base and Campus Quest\u2019s external queries."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Cost-Effective for Development"}),": Free tier was sufficient for development and testing, aligning with project budget constraints."]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"cons-of-firestore-setup",children:"Cons of Firestore Setup"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Query Limitations"}),": Firestore\u2019s query restrictions (e.g., no full-text search, limited compound queries) require client-side filtering in some cases (e.g., ",(0,r.jsx)(s.code,{children:"searchItems"})," in ",(0,r.jsx)(s.code,{children:"itemController.js"}),"), increasing complexity and potential latency."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Cost Monitoring"}),": While the free tier sufficed for development, production usage (reads/writes) could incur costs, requiring careful query optimization."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Index Management"}),": Complex queries (e.g., filtering ",(0,r.jsx)(s.code,{children:"items"})," by multiple fields or ",(0,r.jsx)(s.code,{children:"chats"})," by ",(0,r.jsx)(s.code,{children:"participants"}),") require manual index creation in the Firestore console, which can be overlooked and cause errors."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Dependency on Firebase Ecosystem"}),": Tight integration with Firebase Auth and Hosting creates a dependency on Google\u2019s ecosystem, potentially complicating future migrations."]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"collections",children:"Collections"}),"\n",(0,r.jsx)(s.p,{children:"Below are the nine Firestore collections, their schemas, purposes, and example documents based on the provided data."}),"\n",(0,r.jsxs)(s.h3,{id:"1-users",children:["1. ",(0,r.jsx)(s.code,{children:"users"})]}),"\n",(0,r.jsx)(s.p,{children:"Stores user profile information, including their role in the ThriftFinder ecosystem."}),"\n",(0,r.jsx)(s.h4,{id:"schema",children:"Schema"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Document ID"}),": Firebase UID (e.g., ",(0,r.jsx)(s.code,{children:"hfY0t2eLCGVXRmp4WKoBmR1TIfi1"}),")"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Fields"}),":","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"createdAt"}),": Timestamp of user creation (Firestore Timestamp, e.g., 23 August 2025 at 01:07:07 UTC+2)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"email"}),": User\u2019s email address (string, e.g., ",(0,r.jsx)(s.code,{children:"ryanrats04@gmail.com"}),")"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"name"}),": User\u2019s display name (string, e.g., ",(0,r.jsx)(s.code,{children:"Ryan"}),")"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"role"}),": User role (string, enum: ",(0,r.jsx)(s.code,{children:"customer"}),", ",(0,r.jsx)(s.code,{children:"storeOwner"}),", e.g., ",(0,r.jsx)(s.code,{children:"storeOwner"}),")"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.h4,{id:"purpose",children:"Purpose"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Tracks user accounts and roles to distinguish between customers and store owners."}),"\n",(0,r.jsxs)(s.li,{children:["Used by ",(0,r.jsx)(s.code,{children:"authController.js"})," for signup (",(0,r.jsx)(s.code,{children:"/api/auth/signup"}),") and role retrieval (",(0,r.jsx)(s.code,{children:"/api/auth/getRole"}),")."]}),"\n",(0,r.jsxs)(s.li,{children:["Links to ",(0,r.jsx)(s.code,{children:"stores"})," (via ",(0,r.jsx)(s.code,{children:"ownerId"}),"), ",(0,r.jsx)(s.code,{children:"Reservations"})," (via ",(0,r.jsx)(s.code,{children:"userId"}),"), ",(0,r.jsx)(s.code,{children:"messages"})," (via ",(0,r.jsx)(s.code,{children:"senderId"}),", ",(0,r.jsx)(s.code,{children:"receiverId"}),"), and ",(0,r.jsx)(s.code,{children:"outfits"})," (via ",(0,r.jsx)(s.code,{children:"userId"}),")."]}),"\n"]}),"\n",(0,r.jsx)(s.h4,{id:"example",children:"Example"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-json",children:'{\n  "createdAt": { "_seconds": 1724450827, "_nanoseconds": 0 },\n  "email": "ryanrats04@gmail.com",\n  "name": "Ryan",\n  "role": "storeOwner"\n}\n'})}),"\n",(0,r.jsxs)(s.h3,{id:"2-stores",children:["2. ",(0,r.jsx)(s.code,{children:"stores"})]}),"\n",(0,r.jsx)(s.p,{children:"Stores thrift shop profiles, used for ThriftFinder storefronts and Campus Quest quest locations/advertisements."}),"\n",(0,r.jsx)(s.h4,{id:"schema-1",children:"Schema"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Document ID"}),": UUID (e.g., ",(0,r.jsx)(s.code,{children:"c2e14220-5ebc-4211-9995-b056ad6e852f"}),")"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Fields"}),":","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"address"}),": Physical address (string, e.g., ",(0,r.jsx)(s.code,{children:"1 Jan Smuts Avenue, Braamfontein, Johannesburg"}),")"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"averageRating"}),": Average rating from reviews (number, e.g., 4)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"createdAt"}),": Creation timestamp (Firestore Timestamp, e.g., 28 August 2025 at 21:37:24 UTC+2)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"description"}),": Store description (string, e.g., ",(0,r.jsx)(s.code,{children:"typical braam thrift shop fr"}),")"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"hours"}),": Operating hours by day (map, e.g., ",(0,r.jsx)(s.code,{children:'{ "Monday": { "open": true, "start": "09:00", "end": "17:00" }, ... }'}),")"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"location"}),": Geolocation (map, ",(0,r.jsx)(s.code,{children:"{ lat: number, lng: number }"}),", e.g., ",(0,r.jsx)(s.code,{children:'{ "lat": -26.19289, "lng": 28.0304321 }'}),")"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"ownerId"}),": Firebase UID of the store owner (string, e.g., ",(0,r.jsx)(s.code,{children:"dTGCpDOOteSXAq02NirTMZ2EOQk2"}),")"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"profileImageURL"}),": Cloudinary URL for store\u2019s profile image (string, e.g., ",(0,r.jsx)(s.code,{children:"https://res.cloudinary.com/.../sgwxe5wfwyihjkhasvoc.jpg"}),")"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"reviewCount"}),": Number of reviews (number, e.g., 1)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"storeId"}),": UUID (string, matches document ID)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"storeName"}),": Store name (string, e.g., ",(0,r.jsx)(s.code,{children:"Skull Dugree"}),")"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"theme"}),": Store aesthetic (string, e.g., ",(0,r.jsx)(s.code,{children:"theme-y2k"}),")"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"updatedAt"}),": Last update timestamp (Firestore Timestamp, e.g., 18 October 2025 at 15:52:08 UTC+2)"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Subcollection"}),": ",(0,r.jsx)(s.code,{children:"contactInfos"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Document ID"}),": UUID (e.g., ",(0,r.jsx)(s.code,{children:"2cc06aa4-6c46-4239-9be8-8f69d4c7655a"}),")"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Fields"}),":","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"id"}),": UUID (string, matches document ID)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"type"}),": Contact type (string, e.g., ",(0,r.jsx)(s.code,{children:"email"}),", ",(0,r.jsx)(s.code,{children:"phone"}),")"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"value"}),": Contact value (string, e.g., ",(0,r.jsx)(s.code,{children:"tinogozho2@gmail.com"}),")"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.h4,{id:"purpose-1",children:"Purpose"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Stores thrift shop metadata for display in ThriftFinder and Campus Quest (",(0,r.jsx)(s.code,{children:"GET /external/stores"}),")."]}),"\n",(0,r.jsxs)(s.li,{children:["Links to ",(0,r.jsx)(s.code,{children:"items"}),", ",(0,r.jsx)(s.code,{children:"Reservations"}),", ",(0,r.jsx)(s.code,{children:"chats"}),", ",(0,r.jsx)(s.code,{children:"messages"}),", and ",(0,r.jsx)(s.code,{children:"Reviews"})," via ",(0,r.jsx)(s.code,{children:"storeId"}),"."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"contactInfos"})," subcollection stores additional contact details (e.g., email, phone)."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"theme"})," field enhances UI filtering and user experience."]}),"\n"]}),"\n",(0,r.jsx)(s.h4,{id:"example-1",children:"Example"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-json",children:'{\n  "address": "1 Jan Smuts Avenue, Braamfontein, Johannesburg",\n  "averageRating": 4,\n  "createdAt": { "_seconds": 1724879844, "_nanoseconds": 0 },\n  "description": "typical braam thrift shop fr",\n  "hours": {\n    "Monday": { "open": true, "start": "09:00", "end": "17:00" },\n    "Tuesday": { "open": true, "start": "09:00", "end": "17:00" },\n    "Wednesday": { "open": false, "start": "09:00", "end": "17:00" },\n    "Thursday": { "open": true, "start": "09:00", "end": "22:00" },\n    "Friday": { "open": true, "start": "09:00", "end": "17:00" },\n    "Saturday": { "open": false, "start": "09:00", "end": "17:00" },\n    "Sunday": { "open": false, "start": "09:00", "end": "17:00" }\n  },\n  "location": { "lat": -26.19289, "lng": 28.0304321 },\n  "ownerId": "dTGCpDOOteSXAq02NirTMZ2EOQk2",\n  "profileImageURL": "https://res.cloudinary.com/dfkg0topw/image/upload/v1758987109/muscle-mommies/sgwxe5wfwyihjkhasvoc.jpg",\n  "reviewCount": 1,\n  "storeId": "c2e14220-5ebc-4211-9995-b056ad6e852f",\n  "storeName": "Skull Dugree",\n  "theme": "theme-y2k",\n  "updatedAt": { "_seconds": 1729341128, "_nanoseconds": 0 }\n}\n'})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsxs)(s.strong,{children:["Subcollection Example (",(0,r.jsx)(s.code,{children:"contactInfos"}),")"]}),":"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-json",children:'{\n  "id": "2cc06aa4-6c46-4239-9be8-8f69d4c7655a",\n  "type": "email",\n  "value": "tinogozho2@gmail.com"\n}\n'})}),"\n",(0,r.jsxs)(s.h3,{id:"3-items",children:["3. ",(0,r.jsx)(s.code,{children:"items"})]}),"\n",(0,r.jsx)(s.p,{children:"Stores thrift item listings for sale in stores."}),"\n",(0,r.jsx)(s.h4,{id:"schema-2",children:"Schema"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Document ID"}),": UUID (e.g., ",(0,r.jsx)(s.code,{children:"02d15b8d-4d4f-4e8f-ba0c-694f3271e62b"}),")"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Fields"}),":","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"category"}),": Item category (string, e.g., ",(0,r.jsx)(s.code,{children:"tops"}),")"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"createdAt"}),": Creation timestamp (Firestore Timestamp, e.g., 25 September 2025 at 18:21:37 UTC+2)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"department"}),": Department (string, e.g., ",(0,r.jsx)(s.code,{children:"men's"}),")"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"description"}),": Item description (string, e.g., ``)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"images"}),": Array of image metadata (array of maps, ",(0,r.jsx)(s.code,{children:"{ imageId: string, imageURL: string, isPrimary: boolean, itemId: string }"}),")"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"itemId"}),": UUID (string, matches document ID)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"name"}),": Item name (string, e.g., ",(0,r.jsx)(s.code,{children:"Tshirt"}),")"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"price"}),": Item price (number, e.g., 150)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"quantity"}),": Available quantity (number, e.g., 1)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"size"}),": Item size (string, e.g., ``)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"status"}),": Item status (string, enum: ",(0,r.jsx)(s.code,{children:"Available"}),", ",(0,r.jsx)(s.code,{children:"Reserved"}),", ",(0,r.jsx)(s.code,{children:"Sold"}),", ",(0,r.jsx)(s.code,{children:"Out of Stock"}),", e.g., ",(0,r.jsx)(s.code,{children:"Available"}),")"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"storeId"}),": Reference to store (string, e.g., ",(0,r.jsx)(s.code,{children:"c2e14220-5ebc-4211-9995-b056ad6e852f"}),")"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"style"}),": Item style (string, e.g., ``)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"updatedAt"}),": Last update timestamp (Firestore Timestamp, e.g., 25 September 2025 at 18:21:37 UTC+2)"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.h4,{id:"purpose-2",children:"Purpose"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Manages item listings for ThriftFinder\u2019s inventory (",(0,r.jsx)(s.code,{children:"/api/items"}),", ",(0,r.jsx)(s.code,{children:"/api/stores/:storeId/items"}),")."]}),"\n",(0,r.jsxs)(s.li,{children:["Links to ",(0,r.jsx)(s.code,{children:"itemImages"}),", ",(0,r.jsx)(s.code,{children:"Reservations"}),", ",(0,r.jsx)(s.code,{children:"chats"}),", ",(0,r.jsx)(s.code,{children:"messages"}),", and ",(0,r.jsx)(s.code,{children:"outfits"})," via ",(0,r.jsx)(s.code,{children:"itemId"}),"."]}),"\n"]}),"\n",(0,r.jsx)(s.h4,{id:"example-2",children:"Example"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-json",children:'{\n  "category": "tops",\n  "createdAt": { "_seconds": 1727277697, "_nanoseconds": 0 },\n  "department": "men\'s",\n  "description": "",\n  "images": [\n    {\n      "imageId": "62aaa180-125a-42c1-852b-2ccfc899be28",\n      "imageURL": "https://res.cloudinary.com/dfkg0topw/image/upload/v1758817296/muscle-mommies/utxlvddsfjizybybvwo2.jpg",\n      "isPrimary": true,\n      "itemId": "02d15b8d-4d4f-4e8f-ba0c-694f3271e62b"\n    }\n  ],\n  "itemId": "02d15b8d-4d4f-4e8f-ba0c-694f3271e62b",\n  "name": "Tshirt",\n  "price": 150,\n  "quantity": 1,\n  "size": "",\n  "status": "Available",\n  "storeId": "c2e14220-5ebc-4211-9995-b056ad6e852f",\n  "style": "",\n  "updatedAt": { "_seconds": 1727277697, "_nanoseconds": 0 }\n}\n'})}),"\n",(0,r.jsxs)(s.h3,{id:"4-itemimages",children:["4. ",(0,r.jsx)(s.code,{children:"itemImages"})]}),"\n",(0,r.jsx)(s.p,{children:"Stores metadata for images associated with items, uploaded to Cloudinary."}),"\n",(0,r.jsx)(s.h4,{id:"schema-3",children:"Schema"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Document ID"}),": UUID (e.g., ",(0,r.jsx)(s.code,{children:"085a423d-2963-4135-ad85-45bff2b38538"}),")"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Fields"}),":","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"imageId"}),": UUID (string, matches document ID)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"imageURL"}),": Cloudinary URL (string, e.g., ",(0,r.jsx)(s.code,{children:"https://res.cloudinary.com/.../palmcylacfecr0hjywt9.jpg"}),")"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"isPrimary"}),": Whether the image is primary (boolean, e.g., ",(0,r.jsx)(s.code,{children:"true"}),")"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"itemId"}),": Reference to item (string, e.g., ",(0,r.jsx)(s.code,{children:"70d5faf2-6117-4f43-b387-7a4a3eb1689"}),")"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.h4,{id:"purpose-3",children:"Purpose"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Stores image metadata for item listings, linked to ",(0,r.jsx)(s.code,{children:"items"})," via ",(0,r.jsx)(s.code,{children:"itemId"}),"."]}),"\n",(0,r.jsxs)(s.li,{children:["Populated during item creation/update (",(0,r.jsx)(s.code,{children:"createItem"}),", ",(0,r.jsx)(s.code,{children:"updateItem"})," in ",(0,r.jsx)(s.code,{children:"itemController.js"}),")."]}),"\n"]}),"\n",(0,r.jsx)(s.h4,{id:"example-3",children:"Example"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-json",children:'{\n  "imageId": "085a423d-2963-4135-ad85-45bff2b38538",\n  "imageURL": "https://res.cloudinary.com/dfkg0topw/image/upload/v1757024443/muscle-mommies/palmcylacfecr0hjywt9.jpg",\n  "isPrimary": true,\n  "itemId": "70d5faf2-6117-4f43-b387-7a4a3eb1689"\n}\n'})}),"\n",(0,r.jsxs)(s.h3,{id:"5-reservations",children:["5. ",(0,r.jsx)(s.code,{children:"Reservations"})]}),"\n",(0,r.jsx)(s.p,{children:"Tracks item reservations made by customers."}),"\n",(0,r.jsx)(s.h4,{id:"schema-4",children:"Schema"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Document ID"}),": UUID (e.g., ",(0,r.jsx)(s.code,{children:"56387fce-6f71-4e4d-8d52-c78234ea188d"}),")"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Fields"}),":","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"completedAt"}),": Completion timestamp (Firestore Timestamp, e.g., 27 September 2025 at 17:19:16 UTC+2, optional)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"itemId"}),": Reference to item (string, e.g., ",(0,r.jsx)(s.code,{children:"d417a96e-aa95-45af-8591-771cdbd7f46a"}),")"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"reservationId"}),": UUID (string, matches document ID)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"reservedAt"}),": Reservation timestamp (Firestore Timestamp, e.g., 2 September 2025 at 15:55:33 UTC+2)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"soldAt"}),": Sale timestamp (Firestore Timestamp, e.g., 27 September 2025 at 17:16:46 UTC+2, optional)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"status"}),": Reservation status (string, enum: ",(0,r.jsx)(s.code,{children:"Pending"}),", ",(0,r.jsx)(s.code,{children:"Confirmed"}),", ",(0,r.jsx)(s.code,{children:"Cancelled"}),", ",(0,r.jsx)(s.code,{children:"Sold"}),", ",(0,r.jsx)(s.code,{children:"Completed"}),", e.g., ",(0,r.jsx)(s.code,{children:"Completed"}),")"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"storeId"}),": Reference to store (string, e.g., ",(0,r.jsx)(s.code,{children:"c2e14220-5ebc-4211-9995-b056ad6e852f"}),")"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"updatedAt"}),": Last update timestamp (Firestore Timestamp, e.g., 27 September 2025 at 17:19:16 UTC+2)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"userId"}),": Firebase UID of the reserving user (string, e.g., ",(0,r.jsx)(s.code,{children:"m4lMopagfkbd2RURe9JeralPK4R2"}),")"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.h4,{id:"purpose-4",children:"Purpose"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Manages item reservations for ThriftFinder\u2019s order system (",(0,r.jsx)(s.code,{children:"/api/stores/reservations"}),", ",(0,r.jsx)(s.code,{children:"/api/stores/reserve/:itemId"}),")."]}),"\n",(0,r.jsxs)(s.li,{children:["Links to ",(0,r.jsx)(s.code,{children:"items"}),", ",(0,r.jsx)(s.code,{children:"stores"}),", ",(0,r.jsx)(s.code,{children:"chats"}),", and ",(0,r.jsx)(s.code,{children:"messages"})," via ",(0,r.jsx)(s.code,{children:"itemId"})," and ",(0,r.jsx)(s.code,{children:"storeId"}),"."]}),"\n"]}),"\n",(0,r.jsx)(s.h4,{id:"example-4",children:"Example"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-json",children:'{\n  "completedAt": { "_seconds": 1727536756, "_nanoseconds": 0 },\n  "itemId": "d417a96e-aa95-45af-8591-771cdbd7f46a",\n  "reservationId": "56387fce-6f71-4e4d-8d52-c78234ea188d",\n  "reservedAt": { "_seconds": 1725374133, "_nanoseconds": 0 },\n  "soldAt": { "_seconds": 1727536606, "_nanoseconds": 0 },\n  "status": "Completed",\n  "storeId": "c2e14220-5ebc-4211-9995-b056ad6e852f",\n  "updatedAt": { "_seconds": 1727536756, "_nanoseconds": 0 },\n  "userId": "m4lMopagfkbd2RURe9JeralPK4R2"\n}\n'})}),"\n",(0,r.jsxs)(s.h3,{id:"6-reviews",children:["6. ",(0,r.jsx)(s.code,{children:"Reviews"})]}),"\n",(0,r.jsx)(s.p,{children:"Stores customer reviews for stores and items."}),"\n",(0,r.jsx)(s.h4,{id:"schema-5",children:"Schema"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Document ID"}),": Auto-generated Firestore ID (e.g., ",(0,r.jsx)(s.code,{children:"b089ed4e-3835-450d-b785-bff302533fd2"}),")"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Fields"}),":","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"createdAt"}),": Review timestamp (Firestore Timestamp, e.g., 25 September 2025 at 12:50:27 UTC+2)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"itemId"}),": Reference to item (string, e.g., ",(0,r.jsx)(s.code,{children:"a12b24ae-fd94-428e-9c0c-7aa8be76ba4f"}),", optional)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"rating"}),": Review rating (number, 1-5, e.g., 4)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"reservationId"}),": Reference to reservation (string, e.g., ",(0,r.jsx)(s.code,{children:"b089ed4e-3835-450d-b785-bff302533fd2"}),", optional)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"review"}),": Review text (string, e.g., ",(0,r.jsx)(s.code,{children:"Great quality, seller was extremely helpful. Will shop again"}),")"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"storeId"}),": Reference to store (string, e.g., ",(0,r.jsx)(s.code,{children:"JcjBD6UJLYZwVziJK1w6"}),")"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"userId"}),": Firebase UID of the reviewer (string, e.g., ",(0,r.jsx)(s.code,{children:"hfY0t2eLCGVXRmp4WKoBmR1TIfi1"}),")"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.h4,{id:"purpose-5",children:"Purpose"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Stores feedback for stores and items (",(0,r.jsx)(s.code,{children:"/api/stores/reviews"}),", ",(0,r.jsx)(s.code,{children:"/api/stores/:storeId/reviews"}),")."]}),"\n",(0,r.jsxs)(s.li,{children:["Links to ",(0,r.jsx)(s.code,{children:"stores"}),", ",(0,r.jsx)(s.code,{children:"items"}),", and ",(0,r.jsx)(s.code,{children:"Reservations"})," via ",(0,r.jsx)(s.code,{children:"storeId"}),", ",(0,r.jsx)(s.code,{children:"itemId"}),", and ",(0,r.jsx)(s.code,{children:"reservationId"}),"."]}),"\n"]}),"\n",(0,r.jsx)(s.h4,{id:"example-5",children:"Example"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-json",children:'{\n  "createdAt": { "_seconds": 1727259027, "_nanoseconds": 0 },\n  "itemId": "a12b24ae-fd94-428e-9c0c-7aa8be76ba4f",\n  "rating": 4,\n  "reservationId": "b089ed4e-3835-450d-b785-bff302533fd2",\n  "review": "Great quality, seller was extremely helpful. Will shop again",\n  "storeId": "JcjBD6UJLYZwVziJK1w6",\n  "userId": "hfY0t2eLCGVXRmp4WKoBmR1TIfi1"\n}\n'})}),"\n",(0,r.jsxs)(s.h3,{id:"7-chats",children:["7. ",(0,r.jsx)(s.code,{children:"chats"})]}),"\n",(0,r.jsx)(s.p,{children:"Stores conversation metadata between users (e.g., customer and store owner)."}),"\n",(0,r.jsx)(s.h4,{id:"schema-6",children:"Schema"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Document ID"}),": Concatenated Firebase UIDs (e.g., ",(0,r.jsx)(s.code,{children:"F8g3r5NssmgWcwTAzc0ZOI1MqB42_XlAeEMLnD3QYqtOBbjqMep6rPin2"}),")"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Fields"}),":","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"chatId"}),": Concatenated UIDs (string, matches document ID)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"itemId"}),": Reference to item (string, e.g., ",(0,r.jsx)(s.code,{children:"f3cdba3a-c665-446f-99f6-12605b0d1c6e"}),", optional)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"lastMessage"}),": Most recent message text (string, e.g., ",(0,r.jsx)(s.code,{children:"lowkey wanna kill myself ahahaha"}),")"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"lastTimestamp"}),": Timestamp of last message (Firestore Timestamp, e.g., 29 September 2025 at 01:24:59 UTC+2)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"participants"}),": Array of Firebase UIDs (array of strings, e.g., ",(0,r.jsx)(s.code,{children:'["F8g3r5NssmgWcwTAzc0ZOI1MqB42", "XlAeEMLnD3QYqtOBbjqMep6rPin2"]'}),")"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"storeId"}),": Reference to store (string, e.g., ",(0,r.jsx)(s.code,{children:"WlzniiGFwVWyKYBi6G1"}),", optional)"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.h4,{id:"purpose-6",children:"Purpose"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Tracks conversation metadata for ThriftFinder\u2019s messaging (",(0,r.jsx)(s.code,{children:"/api/stores/chats"}),", ",(0,r.jsx)(s.code,{children:"/api/stores/messages"}),")."]}),"\n",(0,r.jsxs)(s.li,{children:["Links to ",(0,r.jsx)(s.code,{children:"messages"}),", ",(0,r.jsx)(s.code,{children:"items"}),", and ",(0,r.jsx)(s.code,{children:"stores"})," via ",(0,r.jsx)(s.code,{children:"chatId"}),", ",(0,r.jsx)(s.code,{children:"itemId"}),", and ",(0,r.jsx)(s.code,{children:"storeId"}),"."]}),"\n"]}),"\n",(0,r.jsx)(s.h4,{id:"example-6",children:"Example"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-json",children:'{\n  "chatId": "F8g3r5NssmgWcwTAzc0ZOI1MqB42_XlAeEMLnD3QYqtOBbjqMep6rPin2",\n  "itemId": "f3cdba3a-c665-446f-99f6-12605b0d1c6e",\n  "lastMessage": "lowkey wanna kill myself ahahaha",\n  "lastTimestamp": { "_seconds": 1727561099, "_nanoseconds": 0 },\n  "participants": [\n    "F8g3r5NssmgWcwTAzc0ZOI1MqB42",\n    "XlAeEMLnD3QYqtOBbjqMep6rPin2"\n  ],\n  "storeId": "WlzniiGFwVWyKYBi6G1"\n}\n'})}),"\n",(0,r.jsxs)(s.h3,{id:"8-messages",children:["8. ",(0,r.jsx)(s.code,{children:"messages"})]}),"\n",(0,r.jsx)(s.p,{children:"Stores individual messages within conversations."}),"\n",(0,r.jsx)(s.h4,{id:"schema-7",children:"Schema"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Document ID"}),": Auto-generated Firestore ID (e.g., ",(0,r.jsx)(s.code,{children:"1MvBm3z0AG2giHXanBWs"}),")"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Fields"}),":","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"chatId"}),": Reference to chat (string, e.g., ",(0,r.jsx)(s.code,{children:"dTGCpDOOteSXAq02NirTMZ2EOQk2_m4lMopagfkbd2RURe9JeralPK4R2"}),")"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"itemId"}),": Reference to item (string, e.g., ",(0,r.jsx)(s.code,{children:"d417a96e-aa95-45af-8591-771cdbd7f46a"}),", optional)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"message"}),": Message text (string, e.g., ",(0,r.jsx)(s.code,{children:"Reservation request for pink dress"}),")"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"read"}),": Whether the message was read (boolean, e.g., ",(0,r.jsx)(s.code,{children:"true"}),")"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"receiverId"}),": Firebase UID of recipient (string, e.g., ",(0,r.jsx)(s.code,{children:"dTGCpDOOteSXAq02NirTMZ2EOQk2"}),")"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"senderId"}),": Firebase UID of sender (string, e.g., ",(0,r.jsx)(s.code,{children:"m4lMopagfkbd2RURe9JeralPK4R2"}),")"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"storeId"}),": Reference to store (string, e.g., ",(0,r.jsx)(s.code,{children:"c2e14220-5ebc-4211-9995-b056ad6e852f"}),", optional)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"timestamp"}),": Message timestamp (Firestore Timestamp, e.g., 2 September 2025 at 15:55:34 UTC+2)"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.h4,{id:"purpose-7",children:"Purpose"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Stores message history for ThriftFinder\u2019s chat feature (",(0,r.jsx)(s.code,{children:"/api/stores/chats/:chatId/messages"}),")."]}),"\n",(0,r.jsxs)(s.li,{children:["Links to ",(0,r.jsx)(s.code,{children:"chats"}),", ",(0,r.jsx)(s.code,{children:"items"}),", and ",(0,r.jsx)(s.code,{children:"stores"})," via ",(0,r.jsx)(s.code,{children:"chatId"}),", ",(0,r.jsx)(s.code,{children:"itemId"}),", and ",(0,r.jsx)(s.code,{children:"storeId"}),"."]}),"\n"]}),"\n",(0,r.jsx)(s.h4,{id:"example-7",children:"Example"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-json",children:'{\n  "chatId": "dTGCpDOOteSXAq02NirTMZ2EOQk2_m4lMopagfkbd2RURe9JeralPK4R2",\n  "itemId": "d417a96e-aa95-45af-8591-771cdbd7f46a",\n  "message": "Reservation request for pink dress",\n  "read": true,\n  "receiverId": "dTGCpDOOteSXAq02NirTMZ2EOQk2",\n  "senderId": "m4lMopagfkbd2RURe9JeralPK4R2",\n  "storeId": "c2e14220-5ebc-4211-9995-b056ad6e852f",\n  "timestamp": { "_seconds": 1725374134, "_nanoseconds": 0 }\n}\n'})}),"\n",(0,r.jsxs)(s.h3,{id:"9-outfits",children:["9. ",(0,r.jsx)(s.code,{children:"outfits"})]}),"\n",(0,r.jsx)(s.p,{children:"Stores user-created outfit combinations from selected items."}),"\n",(0,r.jsx)(s.h4,{id:"schema-8",children:"Schema"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Document ID"}),": UUID (e.g., ",(0,r.jsx)(s.code,{children:"a1b2c3d4-e5f6-4123-8a9b-0c1d2e3f4g5h"}),")"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Fields"}),":","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"outfitId"}),": UUID (string, matches document ID)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"slots"}),": Array of item IDs or null (array, e.g., ",(0,r.jsx)(s.code,{children:'["d417a96e-aa95-45af-8591-771cdbd7f46a", null, null, null, null, null, null, null, null]'}),")"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"userId"}),": Firebase UID of the user (string, e.g., ",(0,r.jsx)(s.code,{children:"dTGCpDOOteSXAq02NirTMZ2EOQk2"}),")"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.h4,{id:"purpose-8",children:"Purpose"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Allows users to save outfit combinations (",(0,r.jsx)(s.code,{children:"/api/outfits"}),")."]}),"\n",(0,r.jsxs)(s.li,{children:["Links to ",(0,r.jsx)(s.code,{children:"items"})," and ",(0,r.jsx)(s.code,{children:"users"})," via ",(0,r.jsx)(s.code,{children:"slots"})," (item IDs) and ",(0,r.jsx)(s.code,{children:"userId"}),"."]}),"\n"]}),"\n",(0,r.jsx)(s.h4,{id:"example-8",children:"Example"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-json",children:'{\n  "outfitId": "a1b2c3d4-e5f6-4123-8a9b-0c1d2e3f4g5h",\n  "slots": [\n    "d417a96e-aa95-45af-8591-771cdbd7f46a",\n    null,\n    null,\n    null,\n    null,\n    null,\n    null,\n    null,\n    null\n  ],\n  "userId": "dTGCpDOOteSXAq02NirTMZ2EOQk2"\n}\n'})}),"\n",(0,r.jsxs)(s.h3,{id:"10-externalimages",children:["10. ",(0,r.jsx)(s.code,{children:"externalImages"})]}),"\n",(0,r.jsx)(s.p,{children:"Stores metadata for photos uploaded via the external API for Campus Quest\u2019s photo journal feature."}),"\n",(0,r.jsx)(s.h4,{id:"schema-9",children:"Schema"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Document ID"}),": Cloudinary public ID (e.g., ",(0,r.jsx)(s.code,{children:"muscle-mommies/x2xtgq15os9qwfpyq4cy"}),")"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Fields"}),":","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"imageId"}),": Cloudinary public ID (string, matches document ID)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"imageURL"}),": Cloudinary URL (string, e.g., ",(0,r.jsx)(s.code,{children:"https://res.cloudinary.com/.../x2xtgq15os9qwfpyq4cy.jpg"}),")"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"createdAt"}),": Upload timestamp (Firestore Timestamp, e.g., 30 September 2025 at 14:39:00 UTC+2)"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.h4,{id:"purpose-9",children:"Purpose"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Stores metadata for Campus Quest photo journal uploads (",(0,r.jsx)(s.code,{children:"POST /external/upload"}),", ",(0,r.jsx)(s.code,{children:"GET /external/photos"}),")."]}),"\n",(0,r.jsxs)(s.li,{children:["Isolated from ",(0,r.jsx)(s.code,{children:"itemImages"})," to prevent interference with ThriftFinder\u2019s internal logic."]}),"\n"]}),"\n",(0,r.jsx)(s.h4,{id:"example-9",children:"Example"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-json",children:'{\n  "imageId": "muscle-mommies/x2xtgq15os9qwfpyq4cy",\n  "imageURL": "https://res.cloudinary.com/dfkg0topw/image/upload/v1756419431/muscle-mommies/x2xtgq15os9qwfpyq4cy.jpg",\n  "createdAt": { "_seconds": 1727698740, "_nanoseconds": 0 }\n}\n'})}),"\n",(0,r.jsx)(s.h2,{id:"relationships",children:"Relationships"}),"\n",(0,r.jsx)(s.p,{children:"The collections are interconnected to support ThriftFinder\u2019s functionality and Campus Quest\u2019s integration:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"storeId"}),": Links ",(0,r.jsx)(s.code,{children:"stores"})," to ",(0,r.jsx)(s.code,{children:"items"}),", ",(0,r.jsx)(s.code,{children:"Reservations"}),", ",(0,r.jsx)(s.code,{children:"Reviews"}),", ",(0,r.jsx)(s.code,{children:"chats"}),", and ",(0,r.jsx)(s.code,{children:"messages"}),"."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"itemId"}),": Links ",(0,r.jsx)(s.code,{children:"items"})," to ",(0,r.jsx)(s.code,{children:"itemImages"}),", ",(0,r.jsx)(s.code,{children:"Reservations"}),", ",(0,r.jsx)(s.code,{children:"Reviews"}),", ",(0,r.jsx)(s.code,{children:"chats"}),", ",(0,r.jsx)(s.code,{children:"messages"}),", and ",(0,r.jsx)(s.code,{children:"outfits"})," (via ",(0,r.jsx)(s.code,{children:"slots"}),")."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"userId"})," and ",(0,r.jsx)(s.strong,{children:"ownerId"}),": Link ",(0,r.jsx)(s.code,{children:"users"})," to ",(0,r.jsx)(s.code,{children:"Reservations"}),", ",(0,r.jsx)(s.code,{children:"stores"}),", ",(0,r.jsx)(s.code,{children:"outfits"}),", and ",(0,r.jsx)(s.code,{children:"messages"})," (via ",(0,r.jsx)(s.code,{children:"senderId"}),", ",(0,r.jsx)(s.code,{children:"receiverId"}),")."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"chatId"}),": Links ",(0,r.jsx)(s.code,{children:"chats"})," to ",(0,r.jsx)(s.code,{children:"messages"}),"."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"reservationId"}),": Links ",(0,r.jsx)(s.code,{children:"Reservations"})," to ",(0,r.jsx)(s.code,{children:"Reviews"}),"."]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"data-flow",children:"Data Flow"}),"\n",(0,r.jsx)(s.h3,{id:"thriftfinder-app",children:"ThriftFinder App"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"User Signup"}),": Creates ",(0,r.jsx)(s.code,{children:"users"})," document (",(0,r.jsx)(s.code,{children:"authController.js"}),")."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Store Creation"}),": Populates ",(0,r.jsx)(s.code,{children:"stores"})," and ",(0,r.jsx)(s.code,{children:"contactInfos"})," (",(0,r.jsx)(s.code,{children:"createOrUpdateStore"}),")."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Item Listing"}),": Adds ",(0,r.jsx)(s.code,{children:"items"})," and ",(0,r.jsx)(s.code,{children:"itemImages"})," (",(0,r.jsx)(s.code,{children:"createItem"}),", ",(0,r.jsx)(s.code,{children:"updateItem"}),")."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Reservation"}),": Updates ",(0,r.jsx)(s.code,{children:"items.status"}),", creates ",(0,r.jsx)(s.code,{children:"Reservations"}),", and triggers ",(0,r.jsx)(s.code,{children:"chats"}),"/",(0,r.jsx)(s.code,{children:"messages"})," (",(0,r.jsx)(s.code,{children:"customerReserve"}),")."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Messaging"}),": Creates ",(0,r.jsx)(s.code,{children:"chats"})," and ",(0,r.jsx)(s.code,{children:"messages"})," (",(0,r.jsx)(s.code,{children:"sendMessage"}),", ",(0,r.jsx)(s.code,{children:"createChat"}),")."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Outfit Creation"}),": Saves ",(0,r.jsx)(s.code,{children:"outfits"})," with item references (",(0,r.jsx)(s.code,{children:"saveOutfit"}),")."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Reviews"}),": Creates ",(0,r.jsx)(s.code,{children:"Reviews"})," and updates ",(0,r.jsx)(s.code,{children:"stores.averageRating"})," (",(0,r.jsx)(s.code,{children:"createReview"}),", ",(0,r.jsx)(s.code,{children:"updateStoreRating"}),")."]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"campus-quest-integration",children:"Campus Quest Integration"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Store Data"}),": ",(0,r.jsx)(s.code,{children:"GET /external/stores"})," retrieves ",(0,r.jsx)(s.code,{children:"stores"})," for quest locations or ads."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Photo Journal"}),": ",(0,r.jsx)(s.code,{children:"POST /external/upload"})," uploads photos to Cloudinary and stores metadata in ",(0,r.jsx)(s.code,{children:"externalImages"}),". ",(0,r.jsx)(s.code,{children:"GET /external/photos"})," retrieves photo metadata."]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"user-guide",children:"User Guide"}),"\n",(0,r.jsx)(s.h3,{id:"for-developers",children:"For Developers"}),"\n",(0,r.jsx)(s.h4,{id:"setting-up-firestore",children:"Setting Up Firestore"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Initialize Firebase Admin SDK"}),":","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Configure credentials in ",(0,r.jsx)(s.code,{children:"/server/config/firebase.js"})," using environment variables (",(0,r.jsx)(s.code,{children:"FIREBASE_*"}),")."]}),"\n",(0,r.jsxs)(s.li,{children:["Example:","\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-javascript",children:"const admin = require('firebase-admin');\nadmin.initializeApp({\n  credential: admin.credential.cert(process.env.FIREBASE_CREDENTIALS),\n});\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Set Security Rules"}),":","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Restrict ",(0,r.jsx)(s.code,{children:"users"}),", ",(0,r.jsx)(s.code,{children:"items"}),", ",(0,r.jsx)(s.code,{children:"Reservations"}),", ",(0,r.jsx)(s.code,{children:"chats"}),", ",(0,r.jsx)(s.code,{children:"messages"}),", ",(0,r.jsx)(s.code,{children:"outfits"})," to authenticated users."]}),"\n",(0,r.jsxs)(s.li,{children:["Allow public read for ",(0,r.jsx)(s.code,{children:"stores"})," (for ",(0,r.jsx)(s.code,{children:"GET /external/stores"}),")."]}),"\n",(0,r.jsxs)(s.li,{children:["Restrict ",(0,r.jsx)(s.code,{children:"externalImages"})," write access to API key-authenticated requests."]}),"\n",(0,r.jsxs)(s.li,{children:["Example rules:","\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-json",children:"rules_version = '2';\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    match /stores/{storeId} {\n      allow read: if true;\n      allow write: if request.auth != null && request.auth.uid == resource.data.ownerId;\n    }\n    match /externalImages/{imageId} {\n      allow read, write: if false; // Backend handles access via API key\n    }\n    match /{collection}/{document=**} {\n      allow read, write: if request.auth != null;\n    }\n  }\n}\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.h4,{id:"querying-data",children:"Querying Data"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Retrieve Stores"}),":","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Use ",(0,r.jsx)(s.code,{children:"GET /api/stores"})," or ",(0,r.jsx)(s.code,{children:"GET /external/stores"})," to fetch all stores."]}),"\n",(0,r.jsxs)(s.li,{children:["Example (Node.js with Admin SDK):","\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-javascript",children:"const stores = await admin.firestore().collection('stores').get();\nstores.docs.map((doc) => ({ storeId: doc.id, ...doc.data() }));\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Search Items"}),":","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Use ",(0,r.jsx)(s.code,{children:"GET /api/items/search"})," with query params (e.g., ",(0,r.jsx)(s.code,{children:"category=tops&searchTerm=shirt"}),")."]}),"\n",(0,r.jsxs)(s.li,{children:["Example Firestore query:","\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-javascript",children:"let query = admin\n  .firestore()\n  .collection('items')\n  .where('status', '==', 'Available');\nif (category) query = query.where('category', '==', category);\nconst snapshot = await query.get();\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Manage Reservations"}),":","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Create with ",(0,r.jsx)(s.code,{children:"POST /api/stores/reservations"})," or ",(0,r.jsx)(s.code,{children:"PUT /api/stores/reserve/:itemId"}),"."]}),"\n",(0,r.jsxs)(s.li,{children:["Example:","\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-javascript",children:"await admin.firestore().collection('Reservations').doc(reservationId).set({\n  reservationId,\n  itemId,\n  storeId,\n  userId,\n  status: 'Pending',\n  reservedAt: admin.firestore.FieldValue.serverTimestamp(),\n});\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.h4,{id:"maintaining-the-database",children:"Maintaining the Database"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Indexes"}),":","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Create composite indexes for queries like ",(0,r.jsx)(s.code,{children:"items.where('storeId', '==', storeId)"})," or ",(0,r.jsx)(s.code,{children:"chats.where('participants', 'array-contains', userId)"}),"."]}),"\n",(0,r.jsx)(s.li,{children:"Monitor Firestore console for index errors and create indexes as needed."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Backups"}),":","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Use Firebase\u2019s export feature (",(0,r.jsx)(s.code,{children:"gcloud firestore export"}),") to back up data weekly."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Cost Optimization"}),":","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Minimize reads/writes by caching frequent queries (e.g., store listings)."}),"\n",(0,r.jsxs)(s.li,{children:["Avoid unnecessary client-side filtering (e.g., optimize ",(0,r.jsx)(s.code,{children:"searchItems"}),")."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Cleaning Up"}),":","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Implement a TTL policy for ",(0,r.jsx)(s.code,{children:"externalImages"})," to remove old photos (e.g., older than 90 days)."]}),"\n",(0,r.jsxs)(s.li,{children:["Example cleanup script:","\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-javascript",children:"const cutoff = new Date(Date.now() - 90 * 24 * 60 * 60 * 1000);\nconst oldImages = await admin\n  .firestore()\n  .collection('externalImages')\n  .where('createdAt', '<', admin.firestore.Timestamp.fromDate(cutoff))\n  .get();\noldImages.docs.forEach((doc) => doc.ref.delete());\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"for-campus-quest-team",children:"For Campus Quest Team"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Accessing Stores"}),":","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Use ",(0,r.jsx)(s.code,{children:"GET /external/stores"})," to retrieve store data for quest locations."]}),"\n",(0,r.jsxs)(s.li,{children:["Example response:","\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-json",children:'[\n  {\n    "storeId": "c2e14220-5ebc-4211-9995-b056ad6e852f",\n    "storeName": "Skull Dugree",\n    "location": { "lat": -26.19289, "lng": 28.0304321 },\n    "theme": "theme-y2k"\n  }\n]\n'})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Photo Journal"}),":","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Upload photos via ",(0,r.jsx)(s.code,{children:"POST /external/upload"})," with API key in ",(0,r.jsx)(s.code,{children:"X-API-Key"})," header."]}),"\n",(0,r.jsxs)(s.li,{children:["Retrieve photos via ",(0,r.jsx)(s.code,{children:"GET /external/photos"}),"."]}),"\n",(0,r.jsxs)(s.li,{children:["Example upload (curl):","\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:'curl -X POST -H "X-API-Key: <your-api-key>" -F "image=@/path/to/photo.jpg" https://muscle-mommies-server.onrender.com/external/upload\n'})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"notes",children:"Notes"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Security"}),": Ensure Firestore Security Rules are updated to match backend logic. Regularly audit rules to prevent unauthorized access."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Performance"}),": Optimize queries to reduce Firestore costs (e.g., batch operations in ",(0,r.jsx)(s.code,{children:"markAsRead"}),")."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Campus Quest Collaboration"}),": Share this documentation and the API key securely with the Campus Quest team. Discuss additional needs (e.g., filtering stores by ",(0,r.jsx)(s.code,{children:"location"})," or linking ",(0,r.jsx)(s.code,{children:"externalImages"})," to quests)."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Maintenance"}),": Monitor Cloudinary storage for ",(0,r.jsx)(s.code,{children:"muscle-mommies"})," folder to avoid exceeding limits. Regularly review Firestore usage in the Firebase console."]}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,d.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>l,x:()=>c});var i=n(6540);const r={},d=i.createContext(r);function l(e){const s=i.useContext(d);return i.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),i.createElement(d.Provider,{value:s},e.children)}}}]);